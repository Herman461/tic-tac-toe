(function(e){function t(t){for(var a,i,l=t[0],o=t[1],u=t[2],d=0,g=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&g.push(s[i][0]),s[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);c&&c(t);while(g.length)g.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,l=1;l<r.length;l++){var o=r[l];0!==s[o]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},s={app:0},n=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/tic-tac-toe/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=o;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game"},[r("div",{staticClass:"game__wrapper"},[r("header",{staticClass:"game__header header"},[r("div",{staticClass:"header__container _container"},[r("v-menu")],1)]),r("v-body")],1)])},n=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header__menu menu"},[r("button",{staticClass:"menu__icon",class:{_active:e.isActive},attrs:{type:"button"},on:{click:e.toggleBurger}},[r("span"),r("span"),r("span")]),r("div",{staticClass:"menu__body",class:{_active:e.isActive}},[r("ul",{staticClass:"menu__list"},[r("li",{staticClass:"menu__item"},[r("a",{staticClass:"menu__link fas fa-user-friends",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.toggleBurger(),e.initGame("multiplayer")}}},[r("span",[e._v("Start new game with another player")])])]),r("li",{staticClass:"menu__item"},[r("a",{staticClass:"menu__link fas fa-robot",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.toggleBurger(),e.initGame("single-player")}}},[r("span",[e._v("Start new game with bot")])])]),r("li",{staticClass:"menu__item"},[r("a",{staticClass:"menu__link fas fa-spinner",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.toggleBurger(),e.loadGame()}}},[r("span",[e._v("Load game")])])])])])])},l=[],o=r("5530"),u=r("2f62"),c={name:"vMenu",data:function(){return{isActive:!0}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(u["d"])([])),Object(u["b"])(["initGame"])),{},{toggleBurger:function(){this.isActive=!this.isActive},initGame:function(e){this.$store.dispatch("initGame",e)},loadGame:function(){this.$store.dispatch("loadGame")}})},d=c,g=(r("e3b1"),r("2877")),m=Object(g["a"])(d,i,l,!1,null,null,null),y=m.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game__body body-game"},[r("div",{staticClass:"body-game__container _container"},[r("div",{staticClass:"body-game__player player"},[r("div",{staticClass:"player__name fas fa-user",class:{_active:e.isSecondPlayerTurn}},[e._v(e._s("single-player"===e.mode?"Bot":"Player 2"))]),r("div",{staticClass:"player__count"},[e._v("Count: "+e._s(e.secondPlayerCount))])]),r("v-board"),r("div",{staticClass:"body-game__player player"},[r("div",{staticClass:"player__name fas fa-user",class:{_active:e.isFirstPlayerTurn}},[e._v("Player 1")]),r("div",{staticClass:"player__count"},[e._v("Count: "+e._s(e.firstPlayerCount))])])],1)])},p=[],h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"body-game__board board"},[r("div",{staticClass:"board__body"},e._l(e.squares,(function(t,a){return r("button",{key:t.id,staticClass:"board__square",class:{_highlighted:t.isHighlighted},attrs:{type:"button"},on:{click:function(t){return e.onSquareClick(a)}}},[e._v(" "+e._s(t.value)+" ")])})),0)])},v=[],S={name:"vBoard",components:{},computed:Object(u["c"])(["squares"]),methods:{onSquareClick:function(e){this.$store.dispatch("onSquareClick",e)}}},b=S,I=(r("8661"),Object(g["a"])(b,h,v,!1,null,null,null)),_=I.exports,O={name:"vBody",computed:Object(o["a"])({},Object(u["c"])(["firstPlayerCount","secondPlayerCount","mode","isSecondPlayerTurn","isFirstPlayerTurn"])),components:{vBoard:_}},P=O,T=Object(g["a"])(P,f,p,!1,null,null,null),q=T.exports,H=r("3835"),C=(r("e9c4"),r("a9e3"),r("99af"),r("cb29"),function(e){var t,r,a=e.length;while(0!==a)t=Math.floor(Math.random()*a),a-=1,r=e[a],e[a]=e[t],e[t]=r;return e}),k=function(){var e=JSON.parse(localStorage.getItem("gameIsOver"));localStorage.setItem("gameIsOver",!e)},w=function(e){localStorage.setItem("winner",e)},N=function(e,t){var r=JSON.parse(localStorage.getItem("history"));r[t]||(r[t]=e,localStorage.setItem("history",JSON.stringify(r)))},j=function(){var e=JSON.parse(localStorage.getItem("turn"));e.isFirstPlayerTurn=!e.isFirstPlayerTurn,e.isSecondPlayerTurn=!e.isSecondPlayerTurn,localStorage.setItem("turn",JSON.stringify(e))},J=function(e){var t=JSON.parse(localStorage.getItem("count"));switch(e){case 1:t.firstPlayer=Number(t.firstPlayer)+1;break;case 2:t.secondPlayer=Number(t.secondPlayer)+1;break}localStorage.setItem("count",JSON.stringify(t))},G=function(e){localStorage.setItem("highlightedSquaresIndices",JSON.stringify(e))},M=function(e){switch(e){case 1:localStorage.setItem("firstPlayerId",e);break;case 2:localStorage.setItem("secondPlayerId",e);break}},x=function(e){localStorage.setItem("gameIsOver",!1),localStorage.setItem("history",'["", "", "", "", "", "", "", "", ""]'),localStorage.setItem("mode",e),localStorage.setItem("count",'{ "firstPlayer": "0", "secondPlayer": "0" }'),localStorage.setItem("winner","0"),localStorage.setItem("highlightedSquaresIndices","[]"),localStorage.setItem("resetGame",!1)},F=function(){var e=C(["X","O"]),t=Object(H["a"])(e,2),r=t[0],a=t[1];localStorage.setItem("symbols",'{ "firstSymbol": "'.concat(r,'", "secondSymbol": "').concat(a,'"}'))},V=function(){var e=C([!0,!1]),t=Object(H["a"])(e,2),r=t[0],a=t[1];localStorage.setItem("turn",'{ "isFirstPlayerTurn": '.concat(r,', "isSecondPlayerTurn": ').concat(a,"}"))},W=function(){var e=JSON.parse(localStorage.getItem("history"));e.fill(""),localStorage.setItem("history",JSON.stringify(e)),localStorage.setItem("winner",0),localStorage.setItem("highlightedSquaresIndices","[]"),localStorage.setItem("gameIsOver",!1),localStorage.setItem("resetGame",!0)},B=function(){localStorage.clear()},E=function(e){switch(e){case 1:localStorage.removeItem("firstPlayerId");break;case 2:localStorage.removeItem("secondPlayerId");break}},$={name:"App",components:{vMenu:y,vBody:q},computed:Object(u["c"])(["playerId"]),methods:Object(u["d"])(["setSquaresValues","setMode","toggleTurn","setTurn","setWinner","setHighlightedSquares","setGameIsOver","setCount","resetHighlightedSquares"]),mounted:function(){var e=this;window.addEventListener("unload",(function(){E(e.playerId)})),window.addEventListener("storage",(function(t){switch(t.key){case"history":e.setSquaresValues();break;case"turn":e.setTurn(),e.toggleTurn();break;case"winner":e.setWinner();break;case"highlightedSquaresIndices":e.setHighlightedSquares();break;case"gameIsOver":e.setGameIsOver();break;case"count":e.setCount();break;case"resetGame":JSON.parse(localStorage.getItem("resetGame"))&&(e.resetHighlightedSquares(),e.setGameIsOver()),localStorage.setItem("resetGame",!1);break}}))}},A=$,D=(r("5c0b"),Object(g["a"])(A,s,n,!1,null,null,null)),L=D.exports;r("4de4"),r("d3b7"),r("caad"),r("2532"),r("159b");a["a"].use(u["a"]);var X=new u["a"].Store({state:{gameIsOver:!1,bot:{symbol:null,id:null,isHisTurn:!1,isWinner:!1},player:{symbol:null,id:null,isHisTurn:!1,isWinner:!1},count:{firstPlayer:0,secondPlayer:0},turn:{isFirstPlayerTurn:!1,isSecondPlayerTurn:!1},squares:[{id:1,value:"",isHighlighted:!1},{id:2,value:"",isHighlighted:!1},{id:3,value:"",isHighlighted:!1},{id:4,value:"",isHighlighted:!1},{id:5,value:"",isHighlighted:!1},{id:6,value:"",isHighlighted:!1},{id:7,value:"",isHighlighted:!1},{id:8,value:"",isHighlighted:!1},{id:9,value:"",isHighlighted:!1}],lines:[[0,4,8],[2,4,6],[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8]],mode:""},actions:{loadGame:function(e){var t=e.state,r=e.commit,a=e.dispatch,s=localStorage.getItem("mode");if(s)switch(s){case"single-player":if(t.mode)return;return r("initSinglePlayerOptions"),t.bot.isHisTurn&&a("botHandler"),r("setSquaresValues"),void r("setMode",s);case"multiplayer":if(t.mode)return;return r("initMultiplayerOptions"),r("setSquaresValues"),void r("setMode",s)}},initGame:function(e,t){var r=e.commit,a=e.state,s=e.dispatch;"multiplayer"===localStorage.getItem("mode")&&"single-player"===t&&(localStorage.setItem("resetOtherGames",!0),B()),"single-player"===localStorage.getItem("mode")&&"multiplayer"===t&&B(),r("setMode",t),localStorage.getItem("mode")||(x(t),F(),V(),r("setTurn")),"multiplayer"===t&&r("initMultiplayerOptions"),"single-player"===t&&(r("initSinglePlayerOptions"),a.bot.isHisTurn&&s("botHandler")),r("setSquaresValues"),r("setTurn")},onSquareClick:function(e,t){var r=e.state,a=e.commit,s=e.dispatch,n=e.getters;if(!r.mode||!localStorage.getItem("mode")||localStorage.getItem("mode")===r.mode)return r.gameIsOver?(W(),a("setSquaresValues"),a("resetHighlightedSquares"),a("setGameIsOver"),void(r.bot.isHisTurn&&(s("botHandler"),a("setSquaresValues")))):0===n.emptySquaresCount?(s("calculateWinner","player"),W(),a("setSquaresValues"),"single-player"===r.mode&&(j(),a("toggleTurn"),a("setTurn")),void(r.bot.isHisTurn&&(s("botHandler"),a("setSquaresValues")))):void(r.player.isHisTurn&&""===r.squares[t].value&&(N(r.player.symbol,t),a("setSquaresValues"),j(),a("toggleTurn"),a("setTurn"),s("calculateWinner","player"),"multiplayer"!==r.mode&&r.bot.isHisTurn&&!r.gameIsOver&&(s("botHandler"),a("setSquaresValues"),s("calculateWinner","bot"))))},calculateWinner:function(e,t){for(var r=e.state,a=e.commit,s=0;s<r.lines.length;s++){var n=r.lines[s],i=r[t].symbol,l=Object(H["a"])(n,3),o=l[0],u=l[1],c=l[2],d=r.squares[o],g=r.squares[u],m=r.squares[c];if(d.value===i&&g.value===i&&m.value===i){w(r[t].id),a("setWinner"),k(),a("setGameIsOver"),a("setCount"),J(r[t].id),a("setCount"),G([o,u,c]),a("setHighlightedSquares");break}}},botHandler:function(e){var t=e.state,r=e.commit;e.getters;if(t.bot.isHisTurn||!t.gameIsOver){var a,s=JSON.parse(localStorage.getItem("history")),n=s.indexOf(t.player.symbol),i=[];while(-1!==n)i.push(n),n=s.indexOf(t.player.symbol,n+1);for(var l=function(e){var r=t.lines[e],s=i.filter((function(e){return r.includes(e)}));if(2===s.length)return a=r.filter((function(e){return-1===s.indexOf(e)})),"break"},o=0;o<t.lines.length;o++){var u=l(o);if("break"===u)break}if(a)s[a]=t.bot.symbol;else{var c=s.filter((function(e){return""===e})),d=Math.floor(Math.random()*c.length);s[d]=t.bot.symbol}localStorage.setItem("history",JSON.stringify(s)),j(),r("toggleTurn"),r("setTurn")}}},mutations:{setMode:function(e,t){e.mode=t},setGameIsOver:function(e){var t=JSON.parse(localStorage.getItem("gameIsOver"));e.gameIsOver=t},resetHighlightedSquares:function(e){for(var t=0;t<e.squares.length;t++){var r=e.squares[t];r.isHighlighted&&(r.isHighlighted=!1)}},setWinner:function(e){var t=JSON.parse(localStorage.getItem("winner"));e.player.id===t&&(e.player.isWinner=!0)},resetPlayerTurn:function(e){"single-player"===e.mode&&(e.player.isHisTurn=!1)},setSquaresValues:function(e){var t=JSON.parse(localStorage.getItem("history"));e.squares.forEach((function(e,r){e.value=t[r]}))},toggleTurn:function(e){e.player.isHisTurn=!e.player.isHisTurn,"single-player"===e.mode&&(e.bot.isHisTurn=!e.bot.isHisTurn)},setTurn:function(e){var t=JSON.parse(localStorage.getItem("turn"));e.turn.isFirstPlayerTurn=t.isFirstPlayerTurn,e.turn.isSecondPlayerTurn=t.isSecondPlayerTurn},setCount:function(e){var t=JSON.parse(localStorage.getItem("count"));e.count.firstPlayer=Number(t.firstPlayer),e.count.secondPlayer=Number(t.secondPlayer)},setHighlightedSquares:function(e){var t=JSON.parse(localStorage.getItem("highlightedSquaresIndices"));t.length>0&&t.forEach((function(t){e.squares[t].isHighlighted=!0}))},initSinglePlayerOptions:function(e){var t=JSON.parse(localStorage.getItem("symbols")),r=t.firstSymbol,a=t.secondSymbol,s=JSON.parse(localStorage.getItem("turn")),n=s.isFirstPlayerTurn,i=s.isSecondPlayerTurn;e.player.id=1,e.player.symbol=r,e.player.isHisTurn=n,e.bot.id=2,e.bot.symbol=a,e.bot.isHisTurn=i},initMultiplayerOptions:function(e){var t=JSON.parse(localStorage.getItem("symbols")),r=t.firstSymbol,a=t.secondSymbol,s=JSON.parse(localStorage.getItem("turn")),n=s.isFirstPlayerTurn,i=s.isSecondPlayerTurn;localStorage.getItem("firstPlayerId")?localStorage.getItem("secondPlayerId")?localStorage.getItem("firstPlayerId")&&localStorage.getItem("secondPlayerId")&&(M(2),e.player.id=2,e.player.symbol=a,e.player.isHisTurn=i||!1):(M(2),e.player.id=2,e.player.symbol=a,e.player.isHisTurn=i||!1):(M(1),e.player.id=1,e.player.symbol=r,e.player.isHisTurn=n||!1)}},getters:{playerId:function(e){return e.player.id},squares:function(e){return e.squares},emptySquaresCount:function(e){return e.squares.filter((function(e){return""===e.value})).length},firstPlayerCount:function(e){return e.count.firstPlayer},secondPlayerCount:function(e){return e.count.secondPlayer},mode:function(e){return e.mode},isFirstPlayerTurn:function(e){return e.turn.isFirstPlayerTurn},isSecondPlayerTurn:function(e){return e.turn.isSecondPlayerTurn}}});r("78a7");a["a"].config.productionTip=!1,new a["a"]({store:X,render:function(e){return e(L)}}).$mount("#app")},"5a1e":function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("9c0c")},"78a7":function(e,t,r){},8661:function(e,t,r){"use strict";r("5a1e")},"9c0c":function(e,t,r){},a033:function(e,t,r){},e3b1:function(e,t,r){"use strict";r("a033")}});
//# sourceMappingURL=app.8765c2e5.js.map